<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>关于导航</title>
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<link rel="icon" href="/favicon.ico" type="image/x-icon">
<style>
*{box-sizing:border-box;margin:0;padding:0}
body{
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;
  background:#f8f9fa;
  color:#202124;
  min-height:100vh;
  padding:24px;
}
h2{font-size:28px;color:#202124;margin-bottom:16px;}
p{font-size:16px;color:#5f6368;margin-bottom:12px;line-height:1.6;}
button{
  padding:10px 20px;background:#1a73e8;color:#fff;border:none;border-radius:6px;cursor:pointer;transition:all 0.2s;
}
button:hover{background:#1669c1;}
input,textarea{
  width:100%;padding:12px;border:1px solid #dadce0;border-radius:6px;margin-bottom:12px;font-size:14px;outline:none;
}
textarea{resize:none;height:100px;}
#feedback-btn{margin-top:16px;}
/* 弹窗样式 */
#feedback-modal{
  position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.4);
  display:none;justify-content:center;align-items:center;z-index:9999;
}
#feedback-content{
  background:#fff;padding:24px;border-radius:12px;max-width:480px;width:90%;box-shadow:0 4px 12px rgba(0,0,0,0.2);
  position:relative;
}
#feedback-content h3{margin-bottom:16px;color:#202124;}
#feedback-content .close{
  position:absolute;top:12px;right:12px;font-size:18px;cursor:pointer;color:#999;
}
#feedback-content .close:hover{color:#333;}
#feedback-content button{width:100%;}
</style>
</head>
<body>

<h2>关于导航</h2>
<p>本站致力于收录优质、常用的网站资源。</p>
<p>所有网站均来源于人工整理与用户提交，经审核后上线。</p>
<p>如发现不良内容，可联系我们处理。</p>

<button id="open-feedback">提交建议 / 联系我们</button>

<!-- 弹窗 -->
<div id="feedback-modal">
  <div id="feedback-content">
    <span class="close" id="close-feedback">&times;</span>
    <h3>用户反馈</h3>
    <textarea id="fb-message" placeholder="请输入您的建议或反馈..."></textarea>
    <input id="fb-contact" placeholder="联系方式（选填，可填写邮箱或手机号）">
    <button id="feedback-btn">提交</button>
  </div>
</div>

<script>
// 打开/关闭弹窗
const modal = document.getElementById('feedback-modal');
document.getElementById('open-feedback').onclick = () => modal.style.display='flex';
document.getElementById('close-feedback').onclick = () => modal.style.display='none';
window.onclick = e => { if(e.target===modal) modal.style.display='none'; }

// 提交反馈
document.getElementById('feedback-btn').onclick = async () => {
  const message = document.getElementById('fb-message').value.trim();
  const contact = document.getElementById('fb-contact').value.trim();
  if(!message){ alert('请输入反馈内容'); return; }

  // 简单垃圾过滤
  const spamWords = ['成人','赌博','贷款','彩票','AV','porn','sex','casino','博彩','黄色','约炮'];
  if(spamWords.some(w => message.toLowerCase().includes(w))){
    alert('内容包含敏感词，提交失败'); return;
  }

  try{
    const res = await fetch('/api/kv/NAV_DATA/user_feedback',{
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body:JSON.stringify({ message, contact, time:new Date().toISOString() })
    });
    if(res.ok){
      alert('感谢您的反馈，我们已收到！');
      document.getElementById('fb-message').value='';
      document.getElementById('fb-contact').value='';
      modal.style.display='none';
    }else{
      const text = await res.text();
      alert('提交失败: '+text);
    }
  }catch(e){
    alert('提交异常: '+e.message);
  }
}
</script>

</body>
</html>
