<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>导航</title>
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<meta name="google-adsense-account" content="ca-pub-9474229114991789">

<!-- Google AdSense -->
<script async
  src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9474229114991789"
  crossorigin="anonymous"></script>

<style>
*{box-sizing:border-box;margin:0;padding:0}
body{
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial;
  background:#f8f9fa;
  color:#202124;
  height:100vh;
  overflow:hidden;
}
#layout{display:flex;height:100vh}

/* ================= 左侧 ================= */
#sidebar{
  width:240px;background:#fff;border-right:1px solid #dadce0;
  display:flex;flex-direction:column;
}
#logo{
  padding:24px;font-size:24px;font-weight:700;
  text-align:center;border-bottom:1px solid #dadce0;
}
#cats{flex:1;overflow-y:auto}
.cat{padding:14px 24px;cursor:pointer}
.cat:hover{background:#f1f3f4}

/* 底部菜单 */
#side-bottom{
  border-top:1px solid #dadce0;
  padding:16px 24px;font-size:14px;
}
#side-bottom div{
  margin-bottom:8px;cursor:pointer;color:#5f6368
}
#side-bottom div:hover{color:#1a73e8}

/* ================= 主区 ================= */
#main{flex:1;overflow-y:auto}
#ad-top{
  background:#fff;border-bottom:1px solid #dadce0;
  padding:12px;text-align:center;
}

/* ===== 搜索页 ===== */
#search-page{
  height:calc(100vh - 60px);
  display:flex;flex-direction:column;
  justify-content:center;align-items:center;
}
#search-box{
  display:flex;align-items:center;
  width:100%;max-width:680px;
}
#search-box input{
  flex:1;padding:16px 20px;
  font-size:18px;border-radius:28px 0 0 28px;
  border:1px solid #dadce0;outline:none;
}
#search-box button{
  padding:16px 24px;
  border:1px solid #dadce0;
  border-left:none;
  border-radius:0 28px 28px 0;
  background:#1a73e8;color:#fff;
  cursor:pointer;
}

/* ===== 搜索引擎选择 ===== */
#engines{
  margin-top:20px;display:flex;gap:12px
}
#engines button{
  padding:8px 16px;border-radius:20px;
  border:1px solid #dadce0;background:#fff;
  cursor:pointer
}
#engines button.active{
  background:#e8f0fe;color:#1a73e8;
}

/* ===== 内容区 ===== */
#content{padding:24px;display:none}

/* ===== 卡片（修复高度不一致问题） ===== */
.links{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(220px,1fr));
  gap:16px;
}
.card{
  display:flex;
  height:96px;              /* ★ 固定高度 */
  padding:12px;
  background:#fff;
  border-radius:12px;
  text-decoration:none;
  color:inherit;
}
.card img{
  width:48px;height:48px;
}
.text{margin-left:12px;overflow:hidden}
.name{font-weight:500}
.desc{
  font-size:13px;color:#5f6368;
  display:-webkit-box;
  -webkit-line-clamp:2;     /* ★ 两行截断 */
  -webkit-box-orient:vertical;
  overflow:hidden;
}

/* ===== 表单 ===== */
form input,form select,form textarea{
  width:100%;margin:8px 0;padding:8px
}
form button{
  padding:10px 20px;background:#1a73e8;
  color:#fff;border:none;cursor:pointer
}
</style>
</head>

<body>
<div id="layout">
  <div id="sidebar">
    <div id="logo">导 航</div>
    <div id="cats"></div>
    <div id="side-bottom">
      <!-- ★ 修复：不弹窗，主窗口显示 -->
      <div onclick="showSubmit()">网站提交</div>
      <div onclick="showLinks()">友情链接</div>
      <div onclick="showAbout()">关于导航</div>
    </div>
  </div>

  <div id="main">
    <div id="ad-top">
      <ins class="adsbygoogle"
        style="display:block"
        data-ad-client="ca-pub-9474229114991789"
        data-ad-slot="1234567890"
        data-ad-format="auto"></ins>
    </div>

    <!-- 搜索页 -->
    <div id="search-page">
      <div id="search-box">
        <input id="q" placeholder="搜索…" 
          onkeydown="if(event.key==='Enter')go()">
        <!-- ★ 修复：搜索按钮在输入框后 -->
        <button onclick="go()">搜索</button>
      </div>
      <div id="engines">
        <button onclick="setEngine(this,'https://www.google.com/search?q=')" class="active">Google</button>
        <button onclick="setEngine(this,'https://www.baidu.com/s?wd=')">百度</button>
        <button onclick="setEngine(this,'https://www.bing.com/search?q=')">Bing</button>
      </div>
    </div>

    <div id="content"></div>
  </div>
</div>

<script>
let engine='https://www.google.com/search?q=';

/* ===== 搜索（新 TAB 打开） ===== */
function go(){
  const q=document.getElementById('q').value.trim();
  if(q) window.open(engine+encodeURIComponent(q),'_blank');
}
function setEngine(btn,url){
  engine=url;
  document.querySelectorAll('#engines button')
    .forEach(b=>b.classList.remove('active'));
  btn.classList.add('active');
}

/* ===== 内容区切换 ===== */
function showContent(html){
  document.getElementById('search-page').style.display='none';
  const c=document.getElementById('content');
  c.style.display='block';
  c.innerHTML=html;
}

/* ===== 网站提交（真实提交 + 防机器人） ===== */
function showSubmit(){
  showContent(`
    <h2>网站提交</h2>
    <form onsubmit="submitSite(event)">
      <select id="cat1" required>
        <option value="">一级分类</option>
      </select>
      <select id="cat2" required>
        <option value="">二级分类</option>
      </select>
      <input id="name" placeholder="网站名称" required>
      <input id="url" placeholder="网站地址 https://" required>
      <textarea id="desc" placeholder="网站简介" required></textarea>

      <!-- ★ Honeypot 防机器人 -->
      <input type="text" id="email" style="display:none">

      <button>提交</button>
    </form>
    <p id="msg"></p>
  `);
}

/* ===== 提交到后台 ===== */
function submitSite(e){
  e.preventDefault();
  if(document.getElementById('email').value) return;

  fetch('/api/submit',{
    method:'POST',
    headers:{'Content-Type':'application/json'},
    body:JSON.stringify({
      cat1:cat1.value,
      cat2:cat2.value,
      name:name.value,
      url:url.value,
      desc:desc.value
    })
  }).then(()=>msg.textContent='提交成功，等待审核');
}

/* ===== 友情链接 ===== */
function showLinks(){
  showContent('<h2>友情链接</h2><p>合作请联系站长</p>');
}

/* ===== 关于 ===== */
function showAbout(){
  showContent('<h2>关于导航</h2><p>专注高质量网址导航</p>');
}
</script>
</body>
</html>
