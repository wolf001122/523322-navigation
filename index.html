<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>导航</title>
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<link rel="icon" href="/favicon.ico" type="image/x-icon">
<script async
  src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9474229114991789"
  crossorigin="anonymous"></script>
<style>
*{box-sizing:border-box;margin:0;padding:0}
body{
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;
  background:#f8f9fa;
  color:#202124;
  height:100vh;
  overflow:hidden;
}
#layout{display:flex;height:100vh;width:100vw;transition:all 0.3s;}
/* 左侧分类 */
#layout{display:flex;height:100vh;width:100vw;}

/* 左侧分类 - PC 默认显示 */
#sidebar{
  width:240px;
  background:#fff;
  border-right:1px solid #dadce0;
  display:flex;
  flex-direction:column;
  box-shadow:0 1px 2px 0 rgba(60,64,67,0.3),0 1px 3px 1px rgba(60,64,67,0.15);
  flex-shrink:0;
  transition: transform 0.3s ease;
}
#sidebar.hidden{
  transform: translateX(-100%);
}
#logo{
  padding:24px 20px;
  font-size:24px;
@@ -68,19 +67,19 @@
#side-bottom div{margin-bottom:12px;cursor:pointer;transition:color 0.2s;}
#side-bottom div:hover{color:#1a73e8;}

/* 新增：移动端遮罩层 */
#overlay {
  display: none;
  position: fixed;
  top: 0; left: 0; right: 0; bottom: 0;
  background: rgba(0,0,0,0.5);
  z-index: 199;
/* 移动端遮罩层 */
#overlay{
  display:none;
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.5);
  z-index:199;
}

/* 汉堡按钮 */
/* 汉堡菜单 */
#hamburger{
  display:none;
  position:fixed;  /* 改为 fixed，避免滚动时位置变动 */
  position:fixed;
  top:16px;
  left:16px;
  width:28px;
@@ -95,12 +94,11 @@
  height:4px;
  background:#202124;
  border-radius:2px;
  transition: all 0.3s;
  transition:all 0.3s;
}

/* 主区域 */
#main{flex:1;overflow:hidden;display:flex;flex-direction:column;background:#f8f9fa;transition: margin-left 0.3s;}
#main.shifted{margin-left:240px;}
#main{flex:1;overflow:hidden;display:flex;flex-direction:column;background:#f8f9fa;}
#ad-top{background:#fff;border-bottom:1px solid #dadce0;padding:12px;text-align:center;box-shadow:0 1px 2px 0 rgba(60,64,67,0.3);flex-shrink:0;}
#search-page{height:calc(100% - 60px);display:flex;flex-direction:column;justify-content:center;align-items:center;padding:40px;}
#search-box{display:flex;width:100%;max-width:680px;}
@@ -111,14 +109,10 @@
#engines button{padding:10px 20px;border:1px solid #dadce0;background:#fff;border-radius:24px;cursor:pointer;font-size:14px;color:#3c4043;transition:all 0.2s;}
#engines button:hover{background:#f1f3f4;box-shadow:0 1px 3px rgba(0,0,0,0.15);}
#engines button.active{background:#e8f0fe;color:#1a73e8;}

/* 内容页 */
#content{flex:1;display:none;overflow:auto;padding:16px;}

/* 广告位 */
/* 广告与卡片样式保持不变 */
.ad-box{margin:32px 0;padding:16px;background:#fff;border:1px solid #dadce0;border-radius:8px;text-align:center;box-shadow:0 1px 2px 0 rgba(60,64,67,0.3);}

/* 分类卡片 */
.category-title{font-size:28px;font-weight:500;color:#202124;margin-bottom:8px;}
.sub-title{font-size:18px;color:#5f6368;margin:24px 0 12px;font-weight:500;}
.links{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:16px;}
@@ -130,44 +124,30 @@
.desc{font-size:13px;color:#5f6368;white-space:normal;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;margin-top:4px;}
iframe#external-frame{flex:1;width:100%;border:none;display:block;}

/* 手机适配 */
/* 移动端适配 */
@media (max-width:768px){
  #sidebar{
    position:fixed;
    top:0;
    left:0;
    height:100%;
    width:280px; /* 手机上稍宽一些，操作更舒适 */
    width:280px;
    z-index:200;
    transform:translateX(-100%);
    transition:transform 0.3s ease;
  }
  #sidebar.visible{
    transform:translateX(0);
  }
  #main.shifted{
    margin-left:0 !important; /* 彻底取消 PC 端的推送效果 */
  }
  #hamburger{
    display:flex;
  }
  /* 遮罩层显示 */
  body.sidebar-open #overlay{
    display:block;
  }
  /* 为固定汉堡菜单留出空间 */
  #ad-top{
    padding-left:60px;
  }
  #search-page{
    padding-top:80px; /* 避免搜索框被汉堡菜单遮挡 */
  }
  #hamburger{display:flex;}
  body.sidebar-open #overlay{display:block;}
  #ad-top{padding-left:60px;}
  #search-page{padding-top:80px;}
}
</style>
</head>
<body>
<div id="layout">
  <div id="sidebar" class="hidden">
  <div id="sidebar">
    <div id="logo" onclick="backToSearch()">导　航</div>
    <div id="cats"></div>
    <div id="side-bottom">
@@ -178,7 +158,6 @@
    </div>
  </div>
  <div id="main">
    <!-- 新增遮罩层，点击可关闭侧边栏 -->
    <div id="overlay" onclick="toggleSidebar()"></div>
    <div id="hamburger" onclick="toggleSidebar()">
      <span></span>
@@ -210,9 +189,7 @@
let engine='https://www.google.com/search?q=';
let data;
const DEF_ICON='/icons/gray.png';
const logo = document.getElementById('logo');
const sidebar = document.getElementById('sidebar');
const main = document.getElementById('main');

function getDomain(url){
  try{ const hostname=new URL(url).hostname; return hostname.startsWith('www.')?hostname.slice(4):hostname; }
@@ -243,10 +220,10 @@
    const d=document.createElement('div');
    d.className='cat';
    d.textContent=c.name;
    d.onclick=() => { 
      document.querySelectorAll('.cat').forEach(cat=>cat.classList.remove('active')); 
      d.classList.add('active'); 
      showCategory(c); 
    d.onclick=() => {
      document.querySelectorAll('.cat').forEach(cat=>cat.classList.remove('active'));
      d.classList.add('active');
      showCategory(c);
    };
    box.appendChild(d);
  });
@@ -298,48 +275,40 @@
      (adsbygoogle=window.adsbygoogle||[]).push({});
    }
  });
  logo.classList.add('return-mode');
  document.getElementById('logo').classList.add('return-mode');
  closeSidebarOnMobile();
}

function backToSearch(){
  document.getElementById('content').style.display='none';
  document.getElementById('search-page').style.display='flex';
  logo.classList.remove('return-mode');
  document.getElementById('logo').classList.remove('return-mode');
  document.querySelectorAll('.cat').forEach(cat=>cat.classList.remove('active'));
  closeSidebarOnMobile();
}

function loadExternal(url){
  document.getElementById('search-page').style.display='none';
  const content=document.getElementById('content');
  content.innerHTML='<iframe id="external-frame" style="flex:1;width:100%;border:none;"></iframe>';
  content.innerHTML='<iframe id="external-frame"></iframe>';
  content.style.display='flex';
  const frame=document.getElementById('external-frame');
  frame.src=url;
  frame.onload = ()=>frame.style.display='block';
  logo.classList.add('return-mode');
  document.getElementById('external-frame').src=url;
  document.getElementById('logo').classList.add('return-mode');
  document.querySelectorAll('.cat').forEach(cat=>cat.classList.remove('active'));
  closeSidebarOnMobile();
}

/* 修复后的侧边栏切换逻辑 */
function toggleSidebar(){
  sidebar.classList.toggle('visible');
  document.body.classList.toggle('sidebar-open');
}

function closeSidebarOnMobile(){
  if(window.innerWidth<=768){
  if(window.innerWidth <= 768){
    sidebar.classList.remove('visible');
    document.body.classList.remove('sidebar-open');
  }
}

/* 初始化时根据屏幕宽度决定侧边栏状态（可选优化） */
if(window.innerWidth <= 768){
  sidebar.classList.add('hidden'); // 确保手机端默认隐藏
}
</script>
</body>
</html>
