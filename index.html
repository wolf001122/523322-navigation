<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>å¯¼èˆª</title>
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<link rel="icon" href="/favicon.ico" type="image/x-icon">
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9474229114991789" crossorigin="anonymous"></script>
<style>
:root {
  --primary: #1a73e8;
  --primary-hover: #1557b0;
  --bg: #f6f8fb;
  --card-bg: #ffffff;
  --text: #202124;
  --text-light: #5f6368;
  --border: #dadce0;
  --shadow-sm: 0 1px 2px rgba(60,64,67,.3), 0 1px 3px rgba(60,64,67,.15);
  --shadow: 0 6px 18px rgba(0,0,0,.08);
  --transition: all .25s ease;
}
* { box-sizing: border-box; margin: 0; padding: 0; }
body {
  font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;
  background: var(--bg);
  color: var(--text);
  height: 100vh;
  overflow: hidden;
}
/* ===== å¸ƒå±€ ===== */
#layout { display: flex; height: 100vh; width: 100vw; }
#main { flex: 1; display: flex; flex-direction: column; overflow: hidden; }
/* ===== ä¾§è¾¹æ  ===== */
#sidebar {
  width: 220px;
  background: var(--card-bg);
  border-right: 1px solid var(--border);
  display: flex;
  flex-direction: column;
  box-shadow: var(--shadow-sm);
  transition: transform 0.3s ease;
  z-index: 200;
}
#logo {
  padding: 28px 20px;
  font-size: 26px;
  font-weight: 700;
  text-align: center;
  color: var(--primary);
  border-bottom: 1px solid var(--border);
}
#logo.return-mode { cursor: pointer; }
#logo.return-mode:hover { opacity: 0.85; }
#logo.return-mode::after {
  content: 'è¿”å›æœç´¢é¦–é¡µ';
  position: absolute;
  top: 100%;
  left: 50%;
  transform: translateX(-50%);
  background: #333;
  color: #fff;
  padding: 6px 12px;
  border-radius: 6px;
  font-size: 13px;
  white-space: nowrap;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.2s;
}
#logo.return-mode:hover::after { opacity: 1; }
#cats { flex: 1; overflow-y: auto; padding: 8px 0; }
.cat {
  padding: 14px 24px;
  cursor: pointer;
  font-size: 15px;
  color: var(--text);
  transition: var(--transition);
}
.cat:hover { background: #f1f3f4; }
.cat.active {
  background: var(--primary);
  color: #fff;
  font-weight: 600;
}
#side-bottom {
  border-top: 1px solid var(--border);
  padding: 20px 24px;
  font-size: 14px;
  color: var(--text-light);
}
#side-bottom div {
  margin-bottom: 14px;
  cursor: pointer;
  transition: color 0.2s;
}
#side-bottom div:hover { color: var(--primary); }
/* ===== ç§»åŠ¨ç«¯ ===== */
#overlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.5); z-index: 199; }
#hamburger {
  display: none;
  position: fixed;
  top: 18px;
  left: 18px;
  width: 32px;
  height: 24px;
  cursor: pointer;
  flex-direction: column;
  justify-content: space-between;
  z-index: 201;
}
#hamburger span { height: 4px; background: var(--text); border-radius: 2px; transition: var(--transition); }
@media (max-width: 868px) {
  #sidebar { position: fixed; top: 0; left: 0; height: 100%; transform: translateX(-100%); width: 260px; }
  #sidebar.visible { transform: translateX(0); }
  #hamburger { display: flex; }
  body.sidebar-open #overlay { display: block; }
  #ad-top { padding-left: 64px; }
}
/* ===== é¡¶éƒ¨å¹¿å‘Šæ  ===== */
#ad-top {
  background: var(--card-bg);
  border-bottom: 1px solid var(--border);
  padding: 10px;
  text-align: center;
  box-shadow: var(--shadow-sm);
  min-height: 70px;
}
/* ===== ä¸»å†…å®¹åŒº ===== */
#content { flex: 1; overflow: auto; padding: 28px; background: var(--bg); }
/* ===== é¦–é¡µæœç´¢ ===== */
#search-page {
  flex: 1;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  padding: 40px;
  animation: fadeUp 0.7s ease;
}
@keyframes fadeUp { from { opacity: 0; transform: translateY(24px); } to { opacity: 1; transform: none; } }
#search-box {
  display: flex;
  width: 100%;
  max-width: 760px;
  border-radius: 32px;
  overflow: hidden;
  box-shadow: 0 4px 16px rgba(0,0,0,0.12);
}
#search-box input {
  flex: 1;
  padding: 20px 28px;
  font-size: 19px;
  border: none;
  outline: none;
  background: var(--card-bg);
}
#search-box input:focus { box-shadow: 0 0 0 4px rgba(26,115,232,0.18); }
#search-box button {
  padding: 0 36px;
  background: var(--primary);
  color: #fff;
  border: none;
  font-size: 17px;
  cursor: pointer;
  transition: var(--transition);
}
#search-box button:hover { background: var(--primary-hover); }
#engines {
  margin-top: 36px;
  display: flex;
  gap: 16px;
  flex-wrap: wrap;
  justify-content: center;
}
#engines button {
  padding: 12px 28px;
  border: 1px solid var(--border);
  background: var(--card-bg);
  border-radius: 28px;
  cursor: pointer;
  font-size: 15px;
  transition: var(--transition);
}
#engines button:hover { background: #f1f3f4; }
#engines button.active {
  background: #e8f0fe;
  border-color: var(--primary);
  color: var(--primary);
  font-weight: 600;
}
/* ===== çƒ­æœæ¦œ ===== */
#hot-search { margin-top: 40px; width: 100%; max-width: 760px; }
.hot-title { font-size: 20px; font-weight: 600; margin-bottom: 12px; color: var(--primary); }
.hot-board { margin-bottom: 24px; }
.hot-board-title { font-weight: 600; margin-bottom: 8px; }
#hot-list { display: flex; flex-wrap: wrap; gap: 10px; }
.hot-item {
  background: var(--card-bg);
  border: 1px solid var(--border);
  border-radius: 24px;
  padding: 8px 16px;
  font-size: 14px;
  cursor: pointer;
  transition: var(--transition);
}
.hot-item:hover { background: var(--primary); color: #fff; }
/* ===== åˆ†ç±»é¡µé¢ ===== */
.category-title { font-size: 32px; font-weight: 600; margin-bottom: 16px; }
.sub-title {
  font-size: 20px;
  color: var(--primary);
  margin: 36px 0 14px;
  padding-bottom: 6px;
  border-bottom: 2px solid var(--primary);
}
/* ===== å¡ç‰‡ç½‘æ ¼ ===== */
.links {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
  gap: 16px;
  padding: 0 8px;
}
.card {
  display: flex;
  align-items: center;
  padding: 12px;
  background: var(--card-bg);
  border-radius: 12px;
  text-decoration: none;
  color: inherit;
  height: 90px;
  box-shadow: var(--shadow-sm);
  transition: var(--transition);
  overflow: hidden;
}
.card:hover {
  transform: translateY(-3px);
  box-shadow: 0 6px 18px rgba(0,0,0,0.14);
}
.card img {
  width: 48px;
  height: 48px;
  min-width: 48px;
  object-fit: contain;
  background: var(--bg);
  border-radius: 8px;
  padding: 4px;
}
.text { margin-left: 12px; overflow: hidden; flex: 1; }
.name { font-size: 15px; font-weight: 600; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.desc { font-size: 13px; color: var(--text-light); margin-top: 4px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.ad-box {
  margin: 40px 0;
  padding: 24px;
  background: var(--card-bg);
  border: 1px solid var(--border);
  border-radius: 14px;
  text-align: center;
  box-shadow: var(--shadow-sm);
}
iframe#external-frame { flex: 1; width: 100%; border: none; }
</style>
</head>
<body>
<div id="layout">
  <div id="sidebar">
    <div id="logo" onclick="backToSearch()">å¯¼ã€€èˆª</div>
    <div id="cats"></div>
    <div id="side-bottom">
      <div onclick="loadExternal('/submit.html')">ç½‘ç«™æäº¤</div>
      <div onclick="loadExternal('/privacy.html')">éšç§æ”¿ç­–</div>
      <div onclick="loadExternal('/links.html')">å‹æƒ…é“¾æ¥</div>
      <div onclick="loadExternal('/about.html')">å…³äºå¯¼èˆª</div>
    </div>
  </div>
  <div id="main">
    <div id="overlay" onclick="toggleSidebar()"></div>
    <div id="hamburger" onclick="toggleSidebar()">
      <span></span><span></span><span></span>
    </div>
    <div id="ad-top">
      <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9474229114991789" data-ad-slot="1234567890" data-ad-format="auto" data-full-width-responsive="true"></ins>
      <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
    </div>
    <div id="search-page">
      <div id="search-box">
        <input id="q" placeholder="æœç´¢â€¦" onkeydown="if(event.key==='Enter')go()">
        <button onclick="go()">æœç´¢</button>
      </div>
      <div id="engines">
        <button onclick="setEngine(this,'https://www.google.com/search?q=')">Google</button>
        <button class="active" onclick="setEngine(this,'https://www.baidu.com/s?wd=')">ç™¾åº¦</button>
        <button onclick="setEngine(this,'https://www.bing.com/search?q=')">Bing</button>
      </div>
      <div id="hot-search">
        <div class="hot-board" id="hot-zhihu"><div class="hot-board-title">ğŸ”¥ çŸ¥ä¹çƒ­æœæ¦œ</div><div class="hot-list"></div></div>
        <div class="hot-board" id="hot-baidu"><div class="hot-board-title">ğŸ“ˆ ç™¾åº¦çƒ­æœæ¦œ</div><div class="hot-list"></div></div>
        <div class="hot-board" id="hot-bilibili"><div class="hot-board-title">ğŸ¥ Bç«™çƒ­æœæ¦œ</div><div class="hot-list"></div></div>
        <div class="hot-board" id="hot-weibo"><div class="hot-board-title">ğŸ¦ å¾®åšçƒ­æœæ¦œ</div><div class="hot-list"></div></div>
      </div>
    </div>
    <div id="content"></div>
  </div>
</div>
<script>
const API='/api/data';
const DEF_ICON='/icons/gray.png';
let engine='https://www.baidu.com/s?wd=';
let data=[];
let xmlDoc=null;
const categoryCache=new Map();
function getDomain(url){try{const h=new URL(url).hostname;return h.startsWith('www.')?h.slice(4):h;}catch{return 'example.com';}}
// ==== åˆ†ç±»æ•°æ®åŠ è½½ ====
fetch(API)
.then(r=>r.text())
.then(text=>{
  xmlDoc=new DOMParser().parseFromString(text,'text/xml');
  data=[...xmlDoc.querySelectorAll('category')].map(c=>({
    name:c.getAttribute('name'),
    subs:[...c.querySelectorAll('subcategory')].map(s=>({
      name:s.getAttribute('name'),
      links:[...s.querySelectorAll('link')].map(l=>({
        name:l.getAttribute('name'),
        url:l.getAttribute('url'),
        desc:l.getAttribute('desc')||'',
        icon:l.getAttribute('icon')||''
      }))
    }))
  }));
  renderCats();
  backToSearch();
  loadHotSearchBoards();  // åŠ è½½æ–°æ·»åŠ çš„4ä¸ªè·¨å¹³å°çƒ­æœæ¦œ
});
function renderCats(){
  const box=document.getElementById('cats');
  box.innerHTML='';
  data.forEach((cat,idx)=>{
    const el=document.createElement('div');
    el.className='cat';
    el.textContent=cat.name;
    el.onclick=()=>{document.querySelectorAll('.cat').forEach(c=>c.classList.remove('active')); el.classList.add('active'); loadCategory(idx);};
    box.appendChild(el);
  });
}
function loadCategory(idx){
  if(categoryCache.has(idx)){ showCategory(categoryCache.get(idx)); return; }
  const node=xmlDoc.querySelectorAll('category')[idx];
  const catData={ name:node.getAttribute('name'), subs:[...node.querySelectorAll('subcategory')].map(s=>({ name:s.getAttribute('name'), links:[...s.querySelectorAll('link')].map(l=>({ name:l.getAttribute('name'), url:l.getAttribute('url'), desc:l.getAttribute('desc')||'', icon:l.getAttribute('icon')||'' })) })) };
  categoryCache.set(idx,catData);
  showCategory(catData);
}
function showCategory(cat){
  document.getElementById('search-page').style.display='none';
  const cont=document.getElementById('content');
  cont.style.display='block';
  cont.innerHTML=`<div class="category-title">${cat.name}</div>
  <div class="ad-box"><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9474229114991789" data-ad-slot="9876543210" data-ad-format="auto"></ins></div>`;
  (adsbygoogle=window.adsbygoogle||[]).push({});
  cat.subs.forEach(sub=>{
    if(!sub.links.length)return;
    cont.innerHTML+=`<div class="sub-title">${sub.name}</div><div class="links"></div>`;
    const linksBox=cont.lastElementChild;
    sub.links.forEach(link=>{
      const a=document.createElement('a'); a.className='card'; a.href=link.url; a.target='_blank';
      const img=document.createElement('img');
      const favicon=link.icon.trim()||`https://www.google.com/s2/favicons?sz=64&domain=${getDomain(link.url)}`;
      img.src=favicon; img.onerror=()=>{img.src=DEF_ICON;};
      const textDiv=document.createElement('div'); textDiv.className='text';
      textDiv.innerHTML=`<div class="name">${link.name}</div><div class="desc">${link.desc}</div>`;
      a.append(img,textDiv); linksBox.appendChild(a);
    });
  });
  document.getElementById('logo').classList.add('return-mode');
  closeSidebarOnMobile();
}
// ==== æ–°å¢ï¼šæ¨¡ä»¿ Addog.vip çš„ 4 ä¸ªè·¨å¹³å°çƒ­æœæ¦œï¼ˆåŠ¨æ€è·å–ï¼‰ ====
function loadHotSearchBoards(){
  const boards = [
    {id:'hot-zhihu', api:'https://api.98dou.cn/doc/hotlist.html?type=zhihu', platform: 'zhihu'},  // çŸ¥ä¹çƒ­æ¦œ
    {id:'hot-baidu', api:'https://api.98dou.cn/doc/hotlist.html?type=baidu', platform: 'baidu'},   // ç™¾åº¦çƒ­ç‚¹
    {id:'hot-bilibili', api:'https://api.98dou.cn/doc/hotlist.html?type=bilihot', platform: 'bilihot'},  // Bç«™çƒ­æœ
    {id:'hot-weibo', api:'https://api.98dou.cn/doc/hotlist.html?type=weibo', platform: 'weibo'}   // å¾®åšçƒ­æœ
  ];
  boards.forEach(b=>{
    fetch(b.api)
      .then(r=>r.json())
      .then(json=>{
        let list = [];
        if (json.data && Array.isArray(json.data)) {
          list = json.data.slice(0, 20).map(item => item.title || item.name || item);  // ä¸åŒAPIç»“æ„ç»Ÿä¸€å–æ ‡é¢˜
        } else if (json.list && Array.isArray(json.list)) {
          list = json.list.slice(0, 20).map(item => item.title || item);
        } else if (Array.isArray(json)) {
          list = json.slice(0, 20);
        }
        const container=document.querySelector('#'+b.id+' .hot-list');
        container.innerHTML='';
        list.forEach(item=>{
          const div=document.createElement('div');
          div.className='hot-item';
          div.textContent=item;
          div.onclick=()=>{document.getElementById('q').value=item; go();};
          container.appendChild(div);
        });
      })
      .catch(err=>{console.error('åŠ è½½çƒ­æœå¤±è´¥',b.id,err);
        const container=document.querySelector('#'+b.id+' .hot-list');
        container.innerHTML='<div style="color:#999;padding:8px;">åŠ è½½å¤±è´¥</div>';
      });
  });
}
function backToSearch(){
  document.getElementById('content').style.display='none';
  document.getElementById('search-page').style.display='flex';
  document.getElementById('logo').classList.remove('return-mode');
  document.querySelectorAll('.cat').forEach(c=>c.classList.remove('active'));
  closeSidebarOnMobile();
}
function go(){
  const q=document.getElementById('q').value.trim();
  if(q) window.open(engine+encodeURIComponent(q),'_blank');
}
function setEngine(btn,url){
  engine=url;
  document.querySelectorAll('#engines button').forEach(b=>b.classList.remove('active'));
  btn.classList.add('active');
}
function loadExternal(url){
  document.getElementById('search-page').style.display='none';
  const cont=document.getElementById('content');
  cont.innerHTML='<iframe id="external-frame" src="'+url+'"></iframe>';
  cont.style.display='flex';
  document.getElementById('logo').classList.add('return-mode');
  document.querySelectorAll('.cat').forEach(c=>c.classList.remove('active'));
  closeSidebarOnMobile();
}
function toggleSidebar(){
  document.getElementById('sidebar').classList.toggle('visible');
  document.body.classList.toggle('sidebar-open');
}
function closeSidebarOnMobile(){
  if(window.innerWidth<=868){
    document.getElementById('sidebar').classList.remove('visible');
    document.body.classList.remove('sidebar-open');
  }
}
</script>
</body>
</html>
