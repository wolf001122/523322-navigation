<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>网址导航 - 实用资源站</title>
  <link rel="stylesheet" href="style.css">

  <!-- Google AdSense 核心脚本 -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9474229114991789"
          crossorigin="anonymous"></script>

  <style>
    body { margin:0; font-family:Arial,sans-serif; background:#f5f5f5; }
    .container { display:flex; max-width:100%; margin:0 auto; min-height:100vh; } /* 百分比宽度，自适应 */

    /* 左侧菜单 */
    .sidebar { width:15%; max-width:280px; background:#fff; border-right:1px solid #eee; padding:2% 1.5%; position:fixed; height:100vh; overflow-y:auto; box-shadow:2px 0 10px rgba(0,0,0,0.05); margin-left:2%; } /* 距左边界距离 + 百分比 */
    .sidebar h3 { margin:0 0 30px; text-align:center; font-size:24px; color:#333; cursor:pointer; transition:0.3s; }
    .sidebar h3:hover { color:#1976d2; }
    .sidebar ul { list-style:none; padding:0; }
    .sidebar li { margin:10px 0; }
    .sidebar a { display:block; padding:15px; background:#f8f9fa; border-radius:10px; text-decoration:none; color:#333; font-size:16px; text-align:center; transition:0.3s; }
    .sidebar a:hover, .sidebar a.active { background:#e3f2fd; color:#1976d2; font-weight:bold; box-shadow:0 2px 8px rgba(0,0,0,0.1); }
    .sidebar .bottom-links { position:absolute; bottom:50px; width:calc(100% - 40px); border-top:1px solid #eee; padding-top:20px; }

    /* 主内容区 - 紧贴顶部广告 */
    .main { margin-left:15%; flex:1; padding:0; min-height:100vh; background:#fff; } /* 与左侧对齐，避免重叠 */

    /* 内容区域 */
    #contentArea { padding:40px; min-height:calc(100vh - 80px); display:flex; flex-direction:column; align-items:flex-start; justify-content:flex-start; } /* 分类内容左对齐 */

    #contentArea h2 { font-size:24px; color:#333; margin-bottom:30px; padding-bottom:10px; border-bottom:2px solid #eee; }

    .links-grid { display:grid; grid-template-columns: repeat(auto-fill, minmax(240px, 1fr)); gap:20px; }

    /* 链接卡片 - 较小图标靠上靠左 */
    .link-card { background:white; padding:20px; border-radius:12px; box-shadow:0 4px 15px rgba(0,0,0,0.08); text-align:left; transition:0.3s; height:100px; display:flex; flex-direction:column; justify-content:flex-start; align-items:flex-start; gap:5px; }
    .link-card:hover { transform:translateY(-4px); box-shadow:0 8px 25px rgba(0,0,0,0.12); }
    .link-card img { width:40px; height:40px; object-fit:contain; border-radius:8px; margin-bottom:5px; } /* 较小图标 */
    .link-card a { font-size:17px; color:#333; text-decoration:none; font-weight:bold; display:block; margin-bottom:5px; }
    .link-card a:hover { color:#1976d2; }
    .link-card .desc { color:#666; font-size:14px; }

    /* 广告位 */
    .ad-top { text-align:center; padding:20px 0; background:#fff; box-shadow:0 2px 10px rgba(0,0,0,0.05); }
    .ad-side { position:fixed; right:2%; top:100px; width:15%; max-width:300px; box-shadow:0 4px 20px rgba(0,0,0,0.1); border-radius:12px; overflow:hidden; } /* 右侧广告自适应 */

    /* 搜索引擎输入框 - 水平垂直居中 */
    .search-container { width:60%; max-width:800px; display:flex; align-items:center; gap:0; position:absolute; top:50%; left:50%; transform:translate(-50%, -50%); } /* 居中 */
    .search-container input { flex:1; padding:15px; font-size:16px; border:1px solid #ddd; border-radius:30px 0 0 30px; }
    .search-container select { padding:15px; font-size:16px; border:1px solid #ddd; border-left:none; border-radius:0; }
    .search-container button { padding:15px 30px; background:#1976d2; color:white; border:none; border-radius:0 30px 30px 0; cursor:pointer; }
    .search-container button:hover { background:#0d47a1; }

    footer { text-align:center; padding:20px 0; color:#666; font-size:14px; border-top:1px solid #eee; background:#fff; } /* 降低高度，协调 */
  </style>
</head>
<body>
  <!-- 顶部广告 728x90 -->
  <div class="ad-top">
    <ins class="adsbygoogle"
         style="display:inline-block;width:90%; max-width:728px;height:90px"
         data-ad-client="ca-pub-9474229114991789"
         data-ad-format="auto"></ins>
    <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
  </div>

  <div class="container">
    <!-- 左侧导航 -->
    <div class="sidebar">
      <h3 onclick="showDefaultSearchEngines()">导航</h3>
      <ul id="categoriesList"></ul>
      <!-- 底部固定链接 -->
      <div class="bottom-links">
        <a href="javascript:void(0)" onclick="showSiteSubmission()">网站提交事务</a>
        <a href="javascript:void(0)" onclick="showFriendlyLinks()">友情链接</a>
        <a href="javascript:void(0)" onclick="showAboutNavigation()">关于导航</a>
      </div>
    </div>

    <!-- 主内容 -->
    <div class="main">
      <div id="contentArea">
        <!-- 默认搜索引擎输入框 - 水平垂直居中 -->
        <div class="search-container">
          <input type="text" id="searchInput" placeholder="请输入搜索内容...">
          <select id="searchEngine">
            <option value="baidu">百度</option>
            <option value="google">Google</option>
            <option value="bing">Bing</option>
            <option value="so">360搜索</option>
          </select>
          <button onclick="performSearch()">搜索</button>
        </div>
      </div>
    </div>

    <!-- 右侧广告 300x600 -->
    <div class="ad-side">
      <ins class="adsbygoogle"
           style="display:inline-block;width:300px;height:600px"
           data-ad-client="ca-pub-9474229114991789"
           data-ad-format="auto"></ins>
    <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
  </div>
</div>

  <footer>© 2025 吾爱三三两两导航站</footer>

  <script>
    let categories = [];

    async function loadData() {
      try {
        const res = await fetch('/api/data');
        const xml = await res.text();
        const parser = new DOMParser();
        const doc = parser.parseFromString(xml, 'text/xml');
        categories = Array.from(doc.querySelectorAll('category')).map(cat => ({
          name: cat.getAttribute('name'),
          links: Array.from(cat.querySelectorAll('link')).map(l => ({
            name: l.getAttribute('name'),
            url: l.getAttribute('url'),
            desc: l.getAttribute('desc') || '',
            icon: l.getAttribute('icon') || ''
          }))
        }));

        renderSidebar();
        showDefaultSearchEngines();
      } catch (e) {
        console.error(e);
      }
    }

    function renderSidebar() {
      const list = document.getElementById('categoriesList');
      list.innerHTML = '';
      categories.forEach(cat => {
        const li = document.createElement('li');
        const a = document.createElement('a');
        a.textContent = cat.name;
        a.href = 'javascript:void(0)';
        a.onclick = () => selectCategory(cat.name);
        li.appendChild(a);
        list.appendChild(li);
      });
    }

    function showDefaultSearchEngines() {
      const area = document.getElementById('contentArea');
      area.innerHTML = `
        <div class="search-container">
          <input type="text" id="searchInput" placeholder="请输入搜索内容...">
          <select id="searchEngine">
            <option value="baidu">百度</option>
            <option value="google">Google</option>
            <option value="bing">Bing</option>
            <option value="so">360搜索</option>
          </select>
          <button onclick="performSearch()">搜索</button>
        </div>
      `;

      document.querySelectorAll('.sidebar a').forEach(a => a.classList.remove('active'));
    }

    function selectCategory(name) {
      const cat = categories.find(c => c.name === name);
      if (!cat) return;

      const area = document.getElementById('contentArea');
      area.innerHTML = `<h2>${cat.name}</h2><div class="links-grid"></div>`;
      const grid = area.querySelector('.links-grid');

      cat.links.forEach(link => {
        const card = document.createElement('div');
        card.className = 'link-card';
        card.innerHTML = `
          ${link.icon ? `<img src="${link.icon}" alt="${link.name}">` : '<img src="https://via.placeholder.com/50?text=ICON" alt="默认图标">'}
          <div class="info">
            <a href="${link.url}" target="_blank">${link.name}</a>
            <div class="desc">${link.desc}</div>
          </div>
        `;
        grid.appendChild(card);
      });

      document.querySelectorAll('.sidebar a').forEach(a => a.classList.remove('active'));
      document.querySelector(`.sidebar a[onclick="selectCategory('${name}')"]`)?.classList.add('active');
    }

    function performSearch() {
      const query = document.getElementById('searchInput').value.trim();
      if (!query) return alert('请输入搜索内容');
      const engine = document.getElementById('searchEngine').value;
      let searchUrl;
      switch (engine) {
        case 'baidu': searchUrl = `https://www.baidu.com/s?wd=${encodeURIComponent(query)}`; break;
        case 'google': searchUrl = `https://www.google.com/search?q=${encodeURIComponent(query)}`; break;
        case 'bing': searchUrl = `https://www.bing.com/search?q=${encodeURIComponent(query)}`; break;
        case 'so': searchUrl = `https://www.so.com/s?q=${encodeURIComponent(query)}`; break;
      }
      window.open(searchUrl, '_blank');
    }

    function showSiteSubmission() {
      const area = document.getElementById('contentArea');
      area.innerHTML = `
        <h2>网站提交事务</h2>
        <p style="max-width:800px; line-height:1.8;">欢迎提交您的网站！请通过后台管理或联系管理员提供网站名称、URL、描述和分类，审核后添加。</p>
      `;
      document.querySelectorAll('.sidebar a').forEach(a => a.classList.remove('active'));
    }

    function showFriendlyLinks() {
      const area = document.getElementById('contentArea');
      area.innerHTML = `
        <h2>友情链接</h2>
        <div class="links-grid">
          <div class="link-card">
            <img src="https://via.placeholder.com/50?text=F1" alt="友情链接1">
            <div class="info">
              <a href="https://example.com" target="_blank">友情链接1</a>
              <div class="desc">示例友情链接描述</div>
            </div>
          </div>
        </div>
      `;
      document.querySelectorAll('.sidebar a').forEach(a => a.classList.remove('active'));
    }

    function showAboutNavigation() {
      const area = document.getElementById('contentArea');
      area.innerHTML = `
        <h2>关于导航</h2>
        <p style="max-width:800px; line-height:1.8;">吾爱三三两两导航站是一个实用资源导航网站，致力于收集常用工具、学习资源、云服务等优质网站，方便用户快速访问。</p>
        <p>版本：1.0 | 更新日期: 2025-12-13</p>
      `;
      document.querySelectorAll('.sidebar a').forEach(a => a.classList.remove('active'));
    }

    loadData();
  </script>
</body>
</html>
